\chapter{\Large{Higher-order functions}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.1}
주어진 리스트 조건표현식은 다음과 같은 표현식과 동일하다.
\begin{lstlisting}[language=Haskell]
(map f) . (filter p)
\end{lstlisting}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.2}
\haskell{./src/ch07-ex02.hs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.3}
\haskell{./src/ch07-ex03.hs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.4}
\haskell{./src/ch07-ex04.hs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.5}
리스트 내 모든 원소의 타입은 동일해야 하는데, 주어진 정의에서 $compose$의 인자로
쓰인 리스트 내 함수 중 함수 $sum$은 나머지 함수와 타입이 다르다. 나머지 함수는
정수 리스트를 내놓는 반면에, $sum$은 정수를 내놓는다.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.6}
\haskell{./src/ch07-ex06.hs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.7}
\haskell[10]{./src/ch07-ex07.hs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.8}
우선 다음과 같이 비트 리스트를 받아서 이에 해당하는 패리티 비트를 계산하는 함수
`\texttt{parity}'를 작성한다.
\haskellpart{./src/ch07-ex08-09.hs}{18}{19}

패리티 비트는 각 8비트 단위 리스트 맨 앞에 붙이도록 하자. 다음은 이 작업을
수행하는 함수 `\texttt{addParity}'이다.
\haskellpart{./src/ch07-ex08-09.hs}{21}{22}

다음과 같이 `\texttt{encode}' 함수를 수정하여 8비트 단위로 쪼갠 후 맨
앞에 패리티 비트가 붙도록 한다.
\haskellpart{./src/ch07-ex08-09.hs}{25}{25}

다음은 문자열 ``\texttt{Bye}''을 변경된 함수로 인코딩한 것이다. 패리티 비트를
쉽게 구별해내기 위해 의도적으로 9비트 단위별로 행을 나누었다.
\begin{lstlisting}
*Main> encode "Bye"
[0,0,1,0,0,0,0,1,0,
 1,1,0,0,1,1,1,1,0,
 0,1,0,1,0,0,1,1,0]
\end{lstlisting}

이제 패리티 비트가 추가된 비트 데이터를 다시 문자열로 복원하는 프로그램을
작성해 보자. 전과 달리 이제는 9비트가 한 문자를 나타내므로, 일단 비트를 쪼개는
함수 `\texttt{chop8}'을 수정해야 한다.
\haskellpart{./src/ch07-ex08-09.hs}{27}{28}

앞의 함수로 쪼개진 9비트 단위 리스트에서 패리티 비트가 올바른지를 검사하고
데이터 영역만을 떼어내어 주는 함수 `\texttt{dataOfChunk}'를 작성한다.
\haskellpart{./src/ch07-ex08-09.hs}{30}{32}

마지막으로 다음과 같이 `\texttt{decode}' 함수를 수정하면 된다.
\haskellpart{./src/ch07-ex08-09.hs}{35}{35}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\exercise{7.9}

패리티 비트 기능이 동작하는지 확인하기 위해 다음과 같이 의도적으로 잘못된 비트
데이터를 전송하는 채널과, 그 채널을 사용하여 문자열을 전송하는 함수를 추가하자.
\haskellpart{./src/ch07-ex08-09.hs}{43}{47}

다음은 작성한 함수로 문자열을 전송해 본 것이다. 데이터가 잘못 전송되었음을
나타내는 오류가 발생하는 것을 볼 수 있다.
\begin{lstlisting}[language=Haskell]
*Main> erroneousTransmit "Haskell"
*** Exception: incorrect parity bit
\end{lstlisting}



%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "master"
%%% End: 